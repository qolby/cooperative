---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

const allNews = await getCollection("news");
// Sort by date desc
const sortedNews = allNews.sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
);
---

<Layout title="Berita & Kegiatan">
    <div
        class="page-header"
        style="background: var(--dark-blue); color: white; padding: 6rem 0 4rem; text-align: center;"
    >
        <div class="container">
            <h1>Berita & Kegiatan</h1>
            <p>Informasi terbaru seputar aktivitas KSP CU Sinar Sejahtera</p>
        </div>
    </div>

    <section class="section">
        <div class="container">
            <div class="grid-3">
                {
                    sortedNews.map((item) => (
                        <article class="card news-card">
                            <div class="news-img-placeholder">
                                Foto Kegiatan
                            </div>
                            <div class="news-content">
                                <span class="date">
                                    {new Date(
                                        item.data.date,
                                    ).toLocaleDateString("id-ID", {
                                        year: "numeric",
                                        month: "long",
                                        day: "numeric",
                                    })}
                                </span>
                                <h3>{item.data.title}</h3>
                                <p>{item.data.summary}</p>
                                <a
                                    href={`/news/${item.slug}`}
                                    class="read-more"
                                >
                                    Baca Selengkapnya
                                </a>
                            </div>
                        </article>
                    ))
                }
            </div>
        </div>
    </section>
</Layout>
